input {
  file {
    # API request/response and search analytics logs
    path => "/usr/share/logstash/ingest_data/api-requests.log"
    start_position => "beginning"
    sincedb_path => "/dev/null"
    codec => "json"
    type => "api"
  }
}

filter {
  # Optionally parse or enrich fields here
}

output {
  elasticsearch {
    hosts => ["${ELASTICSEARCH_HOSTS}"]
    index => "api-monitoring-%{+YYYY.MM.dd}"
    user => "${ELASTICSEARCH_USERNAME}"
    password => "${ELASTICSEARCH_PASSWORD}"
    action => "index"
  }
  stdout { codec => rubydebug }
}
